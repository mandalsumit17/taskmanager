<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple Task Manager</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Material+Icons" rel="stylesheet">
  <style>
    /* --- Global Styles --- */
    * { box-sizing: border-box; }
    body {
      font-family: 'Inter', Arial, sans-serif;
      margin: 0; padding: 0;
      background: linear-gradient(135deg, #e3eafc 0%, #f9f9f9 100%);
      color: #222;
      min-height: 100vh;
    }
    h1 {
      text-align: center;
      font-weight: 600;
      letter-spacing: 1px;
      margin-top: 32px;
      margin-bottom: 24px;
      color: #2a3b4c;
    }

    /* --- Task Form Styles --- */
    .task-form {
      background: #fff;
      padding: 28px 28px 20px 28px;
      border-radius: 14px;
      box-shadow: 0 4px 24px rgba(44,62,80,0.08);
      max-width: 540px;
      margin: 0 auto 32px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      border: 1px solid #e3eafc;
    }
    .task-form input, .task-form select {
      width: 100%;
      margin: 0;
      padding: 12px 14px;
      border: 1.5px solid #d1d9e6;
      border-radius: 6px;
      font-size: 1rem;
      background: #f7fafd;
      transition: border 0.2s;
    }
    .task-form input:focus, .task-form select:focus {
      border-color: #5b9df9;
      outline: none;
      background: #fff;
    }
    .task-form .inline {
      display: flex;
      gap: 10px;
    }
    .task-form .inline > * { flex: 1; }
    .task-form button {
      width: 100%;
      background: linear-gradient(90deg, #5b9df9 0%, #3b82f6 100%);
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 12px 0;
      font-size: 1.08rem;
      font-weight: 600;
      letter-spacing: 0.5px;
      cursor: pointer;
      margin-top: 8px;
      box-shadow: 0 2px 8px rgba(91,157,249,0.08);
      transition: background 0.2s, box-shadow 0.2s;
    }
    .task-form button:hover {
      background: linear-gradient(90deg, #3b82f6 0%, #2563eb 100%);
      box-shadow: 0 4px 16px rgba(91,157,249,0.12);
    }

    /* --- Task List Styles --- */
    .controls, .task-list {
      max-width: 540px;
      margin: 0 auto;
    }
    .controls {
      margin-bottom: 18px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      background: #fff;
      padding: 14px 18px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(44,62,80,0.04);
      border: 1px solid #e3eafc;
    }
    .controls select {
      flex: 1;
      padding: 10px 12px;
      border-radius: 6px;
      border: 1.5px solid #d1d9e6;
      background: #f7fafd;
      font-size: 1rem;
    }
    .task-list {
      margin-bottom: 40px;
    }
    .task-item {
      background: #fff;
      padding: 18px 20px;
      margin-bottom: 14px;
      border-left: 6px solid;
      display: flex;
      flex-direction: column;
      border-radius: 8px;
      box-shadow: 0 2px 12px rgba(44,62,80,0.06);
      transition: background 0.3s, box-shadow 0.2s;
      border-color: #e3eafc;
      position: relative;
    }
    .task-item:hover {
      background: #f7fafd;
      box-shadow: 0 4px 20px rgba(44,62,80,0.10);
    }
    .task-item.completed {
      background: #eafbe7;
      text-decoration: line-through;
      opacity: 0.8;
    }
    .task-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 12px;
    }
    .task-header strong {
      font-size: 1.08rem;
      color: #2a3b4c;
      font-weight: 600;
    }
    .task-header small {
      color: #7b8a9c;
      font-size: 0.97rem;
    }
    .task-actions {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .task-actions button {
      background: none;
      border: none;
      color: #5b9df9;
      font-size: 1.3rem;
      cursor: pointer;
      padding: 6px;
      border-radius: 50%;
      transition: background 0.15s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .task-actions button:hover {
      background: #e3eafc;
      color: #2563eb;
    }
    .task-actions .material-icons {
      font-size: 1.3rem;
      vertical-align: middle;
    }
    .task-actions input[type="checkbox"] {
      accent-color: #43a047;
      width: 18px; height: 18px;
      margin-right: 2px;
      cursor: pointer;
    }
    .priority-Urgent { border-color: #e53935; }
    .priority-High { border-color: #f57c00; }
    .priority-Medium { border-color: #fbc02d; }
    .priority-Low { border-color: #43a047; }

    /* --- Modal Styles --- */
    .modal-overlay {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(44,62,80,0.18);
      display: flex; align-items: center; justify-content: center;
      z-index: 1000;
    }
    .modal-box {
      background: #fff;
      padding: 32px 28px 24px 28px;
      border-radius: 14px;
      box-shadow: 0 8px 40px rgba(44,62,80,0.18);
      text-align: center;
      min-width: 280px;
      max-width: 90vw;
      border: 1px solid #e3eafc;
    }
    .modal-box p {
      font-size: 1.12rem;
      margin-bottom: 22px;
      color: #2a3b4c;
    }
    .modal-box button {
      margin: 0 10px;
      padding: 10px 28px;
      border-radius: 6px;
      border: none;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.18s;
    }
    .modal-box #yes {
      background: linear-gradient(90deg, #e53935 0%, #f57c00 100%);
      color: #fff;
    }
    .modal-box #yes:hover {
      background: linear-gradient(90deg, #b71c1c 0%, #f57c00 100%);
    }
    .modal-box #no {
      background: #e3eafc;
      color: #2a3b4c;
    }
    .modal-box #no:hover {
      background: #d1d9e6;
    }

    /* --- Responsive Layout --- */
    @media (max-width: 600px) {
      .inline { flex-direction: column; }
      .controls { flex-direction: column; }
      .task-form, .controls, .task-list { max-width: 98vw; }
      .task-form { padding: 16px 8px; }
      .controls { padding: 10px 6px; }
      .task-item { padding: 12px 8px; }
    }
  </style>
</head>
<body>
  <h1>Simple Task Manager</h1>

  <div class="task-form">
    <input type="text" id="description" placeholder="Task Description" required>
    <input type="date" id="dueDate" required>
    <div class="inline">
      <select id="type"></select>
      <input type="text" id="newType" placeholder="Add new type (optional)">
    </div>
    <select id="priority">
      <option value="Urgent">Urgent</option>
      <option value="High">High</option>
      <option value="Medium" selected>Medium</option>
      <option value="Low">Low</option>
    </select>
    <button onclick="addTask()">Add Task</button>
  </div>

  <div class="controls">
    <select id="filter" onchange="filterTasks()">
      <option value="all">Show All</option>
      <option value="completed">Show Completed</option>
      <option value="pending">Show Pending</option>
    </select>
    <select id="sort" onchange="sortTasks()">
      <option value="dueDate">Sort by Due Date</option>
      <option value="priority">Sort by Priority</option>
    </select>
  </div>

  <div class="task-list" id="taskList"></div>

  <script>
    /* --- Data & State --- */
    const defaultTypes = ["Home", "School", "Work"];
    let tasks = [];
    let currentFilter = 'all';
    let currentSort = 'dueDate';

    /* --- Utility Functions --- */
    function populateTypes() {
      const sel = document.getElementById('type');
      sel.innerHTML = '';
      const types = [...new Set(defaultTypes.concat(tasks.map(t=>t.type)))];
      types.forEach(type => {
        const opt = document.createElement('option');
        opt.value = opt.textContent = type;
        sel.appendChild(opt);
      });
    }

    function saveTasks() {
      try {
        localStorage.setItem('tasks', JSON.stringify(tasks));
      } catch(e) {
        console.error('Saving failed', e);
      }
    }

    function loadTasks() {
      try {
        tasks = JSON.parse(localStorage.getItem('tasks')) || [];
      } catch(e) {
        console.error('Loading failed', e);
        tasks = [];
      }
      populateTypes();
      renderTasks();
    }

    /* --- Task CRUD --- */
    function addTask() {
      const desc = document.getElementById('description').value.trim();
      const due = document.getElementById('dueDate').value;
      const newType = document.getElementById('newType').value.trim();
      const type = newType || document.getElementById('type').value;
      const priority = document.getElementById('priority').value;
      if (!desc || !due || !type || !priority) return alert('Fill in all required fields.');

      const task = { id: Date.now(), description: desc, dueDate: due, type, priority, completed: false };
      tasks.push(task);
      saveTasks();
      renderTasks();
      document.querySelector('.task-form').reset();
      populateTypes();
    }

    function toggleComplete(id) {
      const t = tasks.find(x => x.id === id);
      if (t) t.completed = !t.completed;
      saveTasks(); renderTasks();
    }

    function deleteTask(id) {
      const confirmBox = document.createElement('div');
      confirmBox.className = 'modal-overlay';
      confirmBox.innerHTML = `
        <div class="modal-box">
          <p><span class="material-icons" style="color:#e53935;font-size:2.2rem;vertical-align:middle;">warning</span><br>Delete this task?</p>
          <button id="yes">Yes</button>
          <button id="no">No</button>
        </div>
      `;
      document.body.appendChild(confirmBox);
      confirmBox.querySelector('#yes').onclick = () => {
        tasks = tasks.filter(x=>x.id!==id);
        saveTasks();
        renderTasks();
        document.body.removeChild(confirmBox);
      };
      confirmBox.querySelector('#no').onclick = () => {
        document.body.removeChild(confirmBox);
      };
    }

    function editTask(id) {
      const t = tasks.find(x => x.id === id);
      if (!t) return;
      const newDesc = prompt('Edit Description', t.description);
      const newDate = prompt('Edit Due Date (YYYY-MM-DD)', t.dueDate);
      const newType = prompt('Edit Type', t.type);
      const newPri = prompt('Edit Priority (Urgent, High, Medium, Low)', t.priority);
      if (newDesc && newDate && newType && newPri) {
        t.description = newDesc;
        t.dueDate = newDate;
        t.type = newType;
        t.priority = newPri;
        saveTasks();
        populateTypes();
        renderTasks();
      }
    }

    /* --- Render & Controls --- */
    function renderTasks() {
      let arr = tasks.slice();
      if (currentFilter === 'completed') arr = arr.filter(x=>x.completed);
      if (currentFilter === 'pending') arr = arr.filter(x=>!x.completed);

      if (currentSort === 'dueDate') {
        arr.sort((a,b)=> new Date(a.dueDate) - new Date(b.dueDate));
      } else {
        const order = { Urgent:4, High:3, Medium:2, Low:1 };
        arr.sort((a,b)=> order[b.priority]-order[a.priority]);
      }

      const c = document.getElementById('taskList');
      c.innerHTML = '';
      if (!arr.length) {
        c.innerHTML = '<p style="text-align:center">No tasks.</p>';
        return;
      }

      arr.forEach(t => {
        const el = document.createElement('div');
        el.className = `task-item priority-${t.priority}${t.completed?' completed':''}`;
        el.innerHTML = `
          <div class="task-header">
            <div>
              <strong>${t.description}</strong><br>
              Due: ${t.dueDate} | Type: ${t.type} | Priority: ${t.priority}iority}</small>
            </div>
            <div class="task-actions">
              <input type="checkbox" ${t.completed?'checked':''} onclick="toggleComplete(${t.id})">title="Mark as complete">
              <button onclick="editTask(${t.id})">Edit</button><span class="material-icons">edit</span></button>
              <button onclick="deleteTask(${t.id})">Delete</button><span class="material-icons">delete</span></button>
            </div>
          </div>`;
        c.appendChild(el);
      });
    }

    function filterTasks() {
      currentFilter = document.getElementById('filter').value;
      renderTasks();
    }

    function sortTasks() {
      currentSort = document.getElementById('sort').value;
      renderTasks();
    }

    window.onload = loadTasks;
  </script>
</body>
</html>

</html></body>  </script>    loadTasks();    /* --- Init --- */    }      renderTasks();      currentSort = document.getElementById('sort').value;    function sortTasks() {
    function sortTasks() {
      currentSort = document.getElementById('sort').value;
      renderTasks();
    }

    window.onload = loadTasks;
  </script>
</body>
</html>
